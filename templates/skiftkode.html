<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>Skift adgangskode</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <!-- Topmenu -->
  <div class="toppanel">
    <form method="get" action="/login">
      <button class="toppanel-knap">Tilbage til log ind</button>
    </form>
  </div>

  <!-- Glasboks -->
  <main class="auth-wrap">
    <section class="auth-box">
      <h2>Skift adgangskode</h2>

      {% if fejl %}<p class="msg msg-error" role="alert">{{ fejl }}</p>{% endif %}
      {% if besked %}<p class="msg msg-ok">{{ besked }}</p>{% endif %}

      <form method="post" action="/skiftkode" class="auth-form" onsubmit="validateSkift(event)" novalidate>
        <label class="sr-only" for="brugernavn">Brugernavn</label>
        <input id="brugernavn" type="text" name="brugernavn" placeholder="Brugernavn" required autocomplete="username">

        <div class="input-eye">
          <label class="sr-only" for="gammel_kode">Nuværende kode</label>
          <input id="gammel_kode" type="password" name="gammel_kode" placeholder="Nuværende kode" required autocomplete="current-password">
          <button type="button" class="eye-toggle" aria-label="Vis nuværende kode" aria-pressed="false" onclick="toggleEye(this,'gammel_kode')">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <title>Vis adgangskode</title>
              <path d="M12 5c5.5 0 9.5 5.2 9.9 5.8a1 1 0 0 1 0 1.3C21.5 12.8 17.5 18 12 18S2.5 12.8 2.1 12.2a1 1 0 0 1 0-1.3C2.5 10.2 6.5 5 12 5zM12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"/>
              <path class="slash" d="M4 4l16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
            </svg>
          </button>
        </div>

        <div class="input-eye">
          <label class="sr-only" for="ny_kode1">Ny kode</label>
          <input id="ny_kode1" type="password" name="ny_kode1" placeholder="Ny kode" required autocomplete="new-password">
          <button type="button" class="eye-toggle" aria-label="Vis ny kode" aria-pressed="false" onclick="toggleEye(this,'ny_kode1')">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <title>Vis adgangskode</title>
              <path d="M12 5c5.5 0 9.5 5.2 9.9 5.8a1 1 0 0 1 0 1.3C21.5 12.8 17.5 18 12 18S2.5 12.8 2.1 12.2a1 1 0 0 1 0-1.3C2.5 10.2 6.5 5 12 5zM12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"/>
              <path class="slash" d="M4 4l16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
            </svg>
          </button>
        </div>

        <div class="input-eye">
          <label class="sr-only" for="ny_kode2">Gentag ny kode</label>
          <input id="ny_kode2" type="password" name="ny_kode2" placeholder="Gentag ny kode" required autocomplete="new-password">
          <button type="button" class="eye-toggle" aria-label="Vis gentag ny kode" aria-pressed="false" onclick="toggleEye(this,'ny_kode2')">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <title>Vis adgangskode</title>
              <path d="M12 5c5.5 0 9.5 5.2 9.9 5.8a1 1 0 0 1 0 1.3C21.5 12.8 17.5 18 12 18S2.5 12.8 2.1 12.2a1 1 0 0 1 0-1.3C2.5 10.2 6.5 5 12 5zM12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"/>
              <path class="slash" d="M4 4l16 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
            </svg>
          </button>
        </div>

        <button type="submit" class="glass-btn">Skift kode</button>
      </form>
    </section>
  </main>

  <footer class="footer">© Hornsberg Group</footer>

  <script>
    function toggleEye(btn, id){
      const inp = document.getElementById(id); if(!inp) return;
      const show = inp.type === 'password';
      inp.type = show ? 'text' : 'password';
      btn.classList.toggle('on', !show);
      btn.setAttribute('aria-pressed', show ? 'true' : 'false');
      const t = btn.querySelector('title');
      if(t) t.textContent = show ? 'Skjul adgangskode' : 'Vis adgangskode';
    }
    function validateSkift(e){
      const p1 = document.getElementById('ny_kode1');
      const p2 = document.getElementById('ny_kode2');
      if(p1 && p2 && p1.value !== p2.value){
        e.preventDefault();
        alert('De nye adgangskoder er ikke ens.');
        p2.focus();
      }
    }
  </script>
</body>
</html>